<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>지출 관리</title>
    <link rel="stylesheet" href="/styles.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <div class="app-container">
        <div class="layout">
            <!-- 사이드바 -->
            <nav class="sidebar">
                <div class="sidebar-header">
                    <h2>지출 · 수입 관리</h2>
                </div>

                <div class="menu-section">
                    <div class="menu-item active">
                        <span class="menu-title">지출관리</span>
                        <div class="sub-menu">
                            <div class="sub-menu-item active" data-menu="preview">내역 관리</div>
                            <div class="sub-menu-item" data-menu="dashboard">대시보드</div>
                        </div>
                    </div>
                    <div class="menu-item">
                        <span class="menu-title">고정 항목 관리</span>
                        <div class="sub-menu">
                            <div class="sub-menu-item" data-menu="fixed-expense">고정 항목</div>
                        </div>
                    </div>
                </div>
            </nav>

            <!-- 메인 콘텐츠 -->
            <main class="main-content">
                <div class="content-container">
                    <div class="auth-bar" id="auth-bar">
                        <div class="auth-user" id="auth-user" style="display:none;"></div>
                        <button type="button" class="auth-btn" id="auth-open-btn">로그인</button>
                        <button type="button" class="auth-btn" id="auth-logout-btn" style="display:none;">로그아웃</button>
                    </div>

                    <div class="content-panel active" id="preview-content">
                        <div class="panel-header">
                            <h1>데이터 관리</h1>
                            <p class="panel-description" id="preview-provider-info"></p>
                        </div>
                        <div class="form-section">
                            <div class="form-group">
                                <div class="year-tabs" id="preview-year-tabs"></div>
                            </div>
                            <!-- 월 탭 -->
                            <div class="month-tabs" id="month-tabs">
                                <!-- JS로 1~12월 탭 생성 -->
                            </div>

                            <!-- 업로드 영역 -->
                            <div class="upload-section">
                                <div class="form-group">
                                    <label>은행/카드사 선택 <span class="required">*</span></label>
                                    <div class="bank-tabs" id="bank-tabs">
                                        <button type="button" class="bank-tab active" data-provider="TOSS">토스</button>
                                        <button type="button" class="bank-tab" data-provider="NH">농협</button>
                                        <button type="button" class="bank-tab" data-provider="KB">국민</button>
                                        <button type="button" class="bank-tab" data-provider="HYUNDAI">현대카드</button>
                                    </div>
                                </div>

                                <div class="form-group" id="pdf-password-group" style="display: none;">
                                    <label for="pdf-password-input">PDF 비밀번호 (선택)</label>
                                    <input type="password" id="pdf-password-input" placeholder="암호 PDF인 경우 입력">
                                </div>

                                <div class="upload-area" id="upload-dropzone">
                                    <p class="upload-text">파일을 여기에 드래그하거나 클릭하여 선택하세요</p>
                                    <p class="upload-hint">PDF 파일</p>
                                    <input type="file" id="upload-file-input" accept=".pdf" style="display: none;">
                                    <div class="selected-file" id="selected-file" style="display: none;">
                                        <div class="file-info">
                                            <span class="file-name" id="selected-file-name"></span>
                                            <button type="button" class="file-remove-btn" id="file-remove-btn">×</button>
                                        </div>
                                    </div>
                                </div>
                                <button class="execute-btn" id="upload-next-btn" disabled>파일 읽기</button>
                            </div>

                            <div id="preview-data-area" style="display: none;">
                                <div class="preview-subtitle">이용 내역</div>
                                <div class="preview-meta" id="preview-meta"></div>
                                <div class="preview-hint" id="preview-hint">오류가 있는 행은 저장되지 않습니다.</div>

                                <div class="preview-top-grid">
                                    <div class="preview-top-card">
                                        <div class="preview-top-title-row">
                                            <div class="preview-top-title">일괄 편집</div>
                                            <span class="help-tip" data-tip="선택한 내역의 카테고리를 한 번에 변경할 수 있습니다.">?</span>
                                            <label class="preview-bulk-toggle preview-bulk-toggle-title">
                                                <input type="checkbox" id="preview-filter-misc-only" />
                                                기타만 보기
                                            </label>
                                        </div>
                                        <div class="preview-bulk-bar">
                                            <div class="preview-bulk-actions">
                                                <select id="preview-bulk-category" aria-label="선택 항목 카테고리 변경"></select>
                                                <button type="button" class="execute-btn outline compact-btn" id="preview-bulk-apply-btn">적용</button>
                                                <button type="button" class="execute-btn outline compact-btn" id="preview-bulk-clear-btn">선택 해제</button>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="preview-top-card form-section" id="tx-search-section">
                                        <div class="preview-top-title">검색/필터 (확정 데이터)</div>
                                        <div class="tx-search-clean-grid">
                                            <div class="tx-search-field tx-search-start">
                                                <div class="tx-date-field">
                                                    <input type="date" id="tx-search-start" aria-label="시작일" />
                                                    <span class="tx-infield-label">시작일</span>
                                                </div>
                                            </div>
                                            <div class="tx-search-field tx-search-end">
                                                <div class="tx-date-field">
                                                    <input type="date" id="tx-search-end" aria-label="종료일" />
                                                    <span class="tx-infield-label">종료일</span>
                                                </div>
                                            </div>
                                            <div class="tx-search-actions-top">
                                                <button type="button" class="execute-btn outline compact-btn" id="tx-search-reset">초기화</button>
                                            </div>

                                            <div class="tx-search-field tx-search-size">
                                                <select id="tx-search-size" aria-label="표시">
                                                    <option value="20" selected>20</option>
                                                    <option value="50">50</option>
                                                    <option value="100">100</option>
                                                </select>
                                            </div>
                                            <div class="tx-search-actions-bottom">
                                                <button type="button" class="execute-btn compact-btn" id="tx-search-btn">검색</button>
                                            </div>

                                            <div class="tx-search-confirm">
                                                <button type="button" class="execute-btn" id="preview-save-btn">확정 저장</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- 프리뷰 테이블 -->
                                <div class="table-wrap">
                                    <table class="preview-table" id="preview-table">
                                        <thead>
                                            <tr>
                                                <th style="width:42px; text-align:center;">
                                                    <input type="checkbox" id="preview-select-all" />
                                                </th>
                                                <th class="sortable" data-sort-key="date">날짜</th>
                                                <th class="sortable" data-sort-key="description">내용</th>
                                                <th class="sortable" data-sort-key="txType">구분</th>
                                                <th class="sortable" data-sort-key="txDetail">거래내용</th>
                                                <th class="sortable" data-sort-key="amount">금액</th>
                                                <th class="sortable" data-sort-key="postBalance">거래후 잔액</th>
                                                <th class="sortable" data-sort-key="category">카테고리</th>
                                                <th>수정</th>
                                            </tr>
                                        </thead>
                                        <tbody id="preview-tbody"></tbody>
                                    </table>
                                </div>

                                <div class="preview-pagination" id="preview-pagination"></div>
                            </div>
                        </div>
                    </div>

                    <div class="content-panel" id="dashboard-content">
                        <div class="panel-header">
                            <h1>대시보드</h1>
                            <p class="panel-description">확정된 데이터(confirmed=Y) 기반 월별/은행별 분석</p>
                        </div>
                        <div class="form-section">
                            <div class="dashboard-tabs" id="dashboard-tabs">
                                <button type="button" class="dashboard-tab active" data-tab="analytics">분석</button>
                                <button type="button" class="dashboard-tab" data-tab="calendar">달력</button>
                            </div>
                            <div class="dashboard-controls">
                                <label for="dashboard-year">년도</label>
                                <select id="dashboard-year"></select>

                                <label for="dashboard-provider">은행/카드사</label>
                                <select id="dashboard-provider">
                                    <option value="ALL">전체</option>
                                    <option value="TOSS">토스</option>
                                    <option value="NH">농협</option>
                                    <option value="KB">국민</option>
                                    <option value="HYUNDAI">현대카드</option>
                                    <option value="FIXED">고정지출</option>
                                </select>

                                <label for="dashboard-month">월(상세)</label>
                                <select id="dashboard-month"></select>

                                <button type="button" id="dashboard-load-btn">조회</button>
                            </div>

                            <div class="dashboard-tab-content active" data-tab-panel="analytics">
                                <div class="dashboard-summary" id="dashboard-summary" style="display:none;">
                                    <div class="summary-card">
                                        <div class="summary-label">총수입</div>
                                        <div class="summary-value" id="dashboard-summary-income">0</div>
                                    </div>
                                    <div class="summary-card">
                                        <div class="summary-label">총지출</div>
                                        <div class="summary-value" id="dashboard-summary-expense">0</div>
                                    </div>
                                    <div class="summary-card">
                                        <div class="summary-label">순이익</div>
                                        <div class="summary-value" id="dashboard-summary-balance">0</div>
                                    </div>
                                    <div class="summary-mom" id="dashboard-summary-mom">전월 대비: -</div>
                                </div>

                                <div class="dashboard-charts" id="dashboard-charts" style="display:none;">
                                    <div class="dashboard-top-charts" id="dashboard-top-charts">
                                        <div class="chart-card">
                                            <h3 class="chart-title">월별 수입/지출 (연간)</h3>
                                            <div class="line-chart-container">
                                                <canvas id="chart-monthly-income-expense"></canvas>
                                            </div>
                                        </div>

                                        <div class="chart-card" id="chart-provider-expense-wrap" style="display:none;">
                                            <h3 class="chart-title">은행별 월별 지출 (전체 선택 시)</h3>
                                            <div class="line-chart-container">
                                                <canvas id="chart-provider-monthly-expense"></canvas>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="chart-card" id="chart-category-wrap">
                                        <h3 class="chart-title">카테고리별 수입/지출 (선택 월)</h3>
                                        <div class="dashboard-controls" style="margin-bottom: 10px;">
                                            <label for="dashboard-category-mode">표시</label>
                                            <select id="dashboard-category-mode">
                                                <option value="EXPENSE" selected>지출</option>
                                                <option value="INCOME">수입</option>
                                            </select>
                                        </div>
                                        <div class="donut-chart-container">
                                            <canvas id="chart-category-income-expense"></canvas>
                                        </div>
                                    </div>
                                </div>

                                <div class="analytics-placeholder" id="dashboard-placeholder">
                                    <p>조회 버튼을 눌러 확정된 데이터를 불러오세요.</p>
                                </div>
                            </div>

                            <div class="dashboard-tab-content" data-tab-panel="calendar">
                                <div class="calendar-panel">
                                    <div class="calendar-header">
                                        <button type="button" class="calendar-nav" id="calendar-prev">이전</button>
                                        <div class="calendar-title" id="calendar-title">-</div>
                                        <button type="button" class="calendar-nav" id="calendar-next">다음</button>
                                    </div>
                                    <div class="calendar-weekdays">
                                        <div>일</div><div>월</div><div>화</div><div>수</div><div>목</div><div>금</div><div>토</div>
                                    </div>
                                    <div class="calendar-grid" id="dashboard-calendar-grid"></div>
                                    <div class="calendar-hint" id="calendar-hint" style="display:none;"></div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="content-panel" id="fixed-expense-content">
                        <div class="panel-header">
                            <div class="panel-title-row">
                                <div>
                                    <h1>고정 항목 관리</h1>
                                    <p class="panel-description">매달 반복되는 고정 항목(지출/수입)을 등록하고 관리합니다.</p>
                                </div>
                                
                            </div>
                        </div>
                        <div class="form-section">
                            <div class="panel-tabs" id="fixed-item-tabs">
                                <button type="button" class="panel-tab active" data-tab="fixed-expense-panel">고정 지출</button>
                                <button type="button" class="panel-tab" data-tab="fixed-income-panel">고정 수입</button>
                            </div>

                            <div class="panel-tab-content active" id="fixed-expense-panel" data-tab-panel="fixed-expense-panel">
                                <div class="form-section-header">
                                    <button type="button" class="execute-btn compact-btn" id="fixed-expense-open-btn">고정 지출 등록</button>
                                </div>
                                <div class="fixed-expense-grid">
                                    <div class="fixed-expense-card">
                                        <div class="card-header-row">
                                            <div>
                                                <h3 class="card-title">등록된 고정 지출</h3>
                                                <p class="card-subtitle">총 <span id="fixed-expense-count">0</span>건</p>
                                            </div>
                                            <div class="fixed-expense-header-actions">
                                                <div class="fixed-expense-type-tabs" id="fixed-expense-type-tabs">
                                                    <button type="button" class="type-tab active" data-type="ALL">전체</button>
                                                    <button type="button" class="type-tab" data-type="SUBSCRIPTION">구독</button>
                                                </div>
                                                <div class="fixed-expense-filter">
                                                    <label for="fixed-expense-filter">상태</label>
                                                    <select id="fixed-expense-filter">
                                                        <option value="ALL">전체</option>
                                                        <option value="ACTIVE">활성</option>
                                                        <option value="PAUSED">중지</option>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="fixed-expense-summary">
                                            <div class="fixed-expense-summary-card">
                                                <div class="fixed-expense-summary-label">이번달 고정지출 합계</div>
                                                <div class="fixed-expense-summary-value" id="fixed-expense-summary-total">-</div>
                                            </div>
                                            <div class="fixed-expense-summary-card">
                                                <div class="fixed-expense-summary-label">활성 건수</div>
                                                <div class="fixed-expense-summary-value" id="fixed-expense-summary-active">-</div>
                                            </div>
                                            <div class="fixed-expense-summary-card">
                                                <div class="fixed-expense-summary-label">다음 결제</div>
                                                <div class="fixed-expense-summary-value" id="fixed-expense-summary-next">-</div>
                                            </div>
                                            <div class="fixed-expense-summary-card">
                                                <div class="fixed-expense-summary-label">구독 총액(월)</div>
                                                <div class="fixed-expense-summary-value" id="fixed-expense-summary-subscription-total">-</div>
                                            </div>
                                        </div>
                                        <div class="fixed-expense-auto">
                                            <div class="fixed-expense-auto-row">
                                                <div class="fixed-expense-auto-title">자동 생성</div>
                                                <label class="fixed-expense-auto-toggle">
                                                    <input type="checkbox" id="fixed-expense-auto-enabled" />
                                                    <span>매달 1일 자동 생성</span>
                                                    <span class="help-tip" data-tip="ON이면 매달 1일에 고정지출(활성) 기준으로 이번달 미확정 내역을 자동으로 생성합니다.">?</span>
                                                </label>
                                            </div>
                                            <div class="fixed-expense-auto-row">
                                                <div class="fixed-expense-auto-actions">
                                                    <span class="fixed-expense-auto-month">
                                                        <label for="fixed-expense-auto-year">년도</label>
                                                        <select id="fixed-expense-auto-year"></select>
                                                        <label for="fixed-expense-auto-month">월</label>
                                                        <select id="fixed-expense-auto-month"></select>
                                                    </span>
                                                </div>
                                                <div class="fixed-expense-auto-actions fixed-expense-auto-actions-right">
                                                    <span class="btn-with-tip">
                                                        <button type="button" class="execute-btn outline compact-btn" id="fixed-expense-auto-view-btn">내역 보기</button>
                                                        <span class="help-tip" data-tip="선택한 월에 생성된 고정지출(FIXED) 내역(미확정/확정)을 확인합니다.">?</span>
                                                    </span>
                                                    <span class="btn-with-tip">
                                                        <button type="button" class="execute-btn outline compact-btn" id="fixed-expense-auto-generate-btn">이번달 생성</button>
                                                        <span class="help-tip" data-tip="이번달 고정지출 내역을 transactions에 미확정(N)으로 생성합니다. 이미 생성된 건은 중복으로 추가되지 않습니다.">?</span>
                                                    </span>
                                                    <span class="btn-with-tip">
                                                        <button type="button" class="execute-btn compact-btn" id="fixed-expense-auto-confirm-btn">이번달 확정</button>
                                                        <span class="help-tip" data-tip="이번달에 생성된 고정지출 미확정 내역(N)을 확정(Y)으로 바꿉니다. 확정되면 대시보드/달력 집계에 포함됩니다.">?</span>
                                                    </span>
                                                    <span class="btn-with-tip">
                                                        <button type="button" class="execute-btn outline compact-btn" id="fixed-expense-auto-unconfirm-btn">확정 취소</button>
                                                        <span class="help-tip" data-tip="선택한 월의 고정지출 확정(Y)을 취소하여 미확정(N)으로 되돌립니다. 취소 후 고정지출 수정/삭제가 가능합니다.">?</span>
                                                    </span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="table-wrap fixed-expense-table-wrap">
                                            <table class="fixed-expense-table" id="fixed-expense-table">
                                                <thead>
                                                    <tr>
                                                        <th class="sortable" data-sort-key="title">항목</th>
                                                        <th class="sortable" data-sort-key="account">통장/카드</th>
                                                        <th class="sortable" data-sort-key="category">카테고리</th>
                                                        <th class="sortable" data-sort-key="billingDay">결제일</th>
                                                        <th class="sortable" data-sort-key="amount">금액</th>
                                                        <th class="sortable memo-col" data-sort-key="memo">메모</th>
                                                        <th class="sortable" data-sort-key="status">상태</th>
                                                        <th>관리</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr class="empty-row">
                                                        <td colspan="8">등록된 고정 지출이 없습니다.</td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="panel-tab-content" id="fixed-income-panel" data-tab-panel="fixed-income-panel">
                                <div class="form-section-header">
                                    <button type="button" class="execute-btn compact-btn" id="fixed-income-open-btn">고정 수입 등록</button>
                                </div>
                                <div class="fixed-expense-grid">
                                    <div class="fixed-expense-card">
                                        <div class="card-header-row">
                                            <div>
                                                <h3 class="card-title">등록된 고정 수입</h3>
                                                <p class="card-subtitle">총 <span id="fixed-income-count">0</span>건</p>
                                            </div>
                                            <div class="fixed-expense-header-actions">
                                                <div class="fixed-expense-type-tabs" id="fixed-income-type-tabs">
                                                    <button type="button" class="type-tab active" data-type="ALL">전체</button>
                                                    <button type="button" class="type-tab" data-type="EXTRA">부가수입</button>
                                                </div>
                                                <div class="fixed-expense-filter">
                                                    <label for="fixed-income-filter">상태</label>
                                                    <select id="fixed-income-filter">
                                                        <option value="ALL">전체</option>
                                                        <option value="ACTIVE">활성</option>
                                                        <option value="PAUSED">중지</option>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="fixed-expense-summary">
                                            <div class="fixed-expense-summary-card">
                                                <div class="fixed-expense-summary-label">이번달 고정수입 합계</div>
                                                <div class="fixed-expense-summary-value" id="fixed-income-summary-total">-</div>
                                            </div>
                                            <div class="fixed-expense-summary-card">
                                                <div class="fixed-expense-summary-label">활성 건수</div>
                                                <div class="fixed-expense-summary-value" id="fixed-income-summary-active">-</div>
                                            </div>
                                            <div class="fixed-expense-summary-card">
                                                <div class="fixed-expense-summary-label">다음 입금</div>
                                                <div class="fixed-expense-summary-value" id="fixed-income-summary-next">-</div>
                                            </div>
                                            <div class="fixed-expense-summary-card">
                                                <div class="fixed-expense-summary-label">부가수입 총액(월)</div>
                                                <div class="fixed-expense-summary-value" id="fixed-income-summary-extra-total">-</div>
                                            </div>
                                        </div>
                                        <div class="fixed-expense-auto">
                                            <div class="fixed-expense-auto-row">
                                                <div class="fixed-expense-auto-title">자동 생성</div>
                                                <label class="fixed-expense-auto-toggle">
                                                    <input type="checkbox" id="fixed-income-auto-enabled" />
                                                    <span>매달 1일 자동 생성</span>
                                                    <span class="help-tip" data-tip="ON이면 매달 1일에 고정수입(활성) 기준으로 이번달 미확정 내역을 자동으로 생성합니다.">?</span>
                                                </label>
                                            </div>
                                            <div class="fixed-expense-auto-row">
                                                <div class="fixed-expense-auto-actions">
                                                    <span class="fixed-expense-auto-month">
                                                        <label for="fixed-income-auto-year">년도</label>
                                                        <select id="fixed-income-auto-year"></select>
                                                        <label for="fixed-income-auto-month">월</label>
                                                        <select id="fixed-income-auto-month"></select>
                                                    </span>
                                                </div>
                                                <div class="fixed-expense-auto-actions fixed-expense-auto-actions-right">
                                                    <span class="btn-with-tip">
                                                        <button type="button" class="execute-btn outline compact-btn" id="fixed-income-auto-view-btn">내역 보기</button>
                                                        <span class="help-tip" data-tip="선택한 월에 생성된 고정수입(FIXED_INCOME) 내역(미확정/확정)을 확인합니다.">?</span>
                                                    </span>
                                                    <span class="btn-with-tip">
                                                        <button type="button" class="execute-btn outline compact-btn" id="fixed-income-auto-generate-btn">이번달 생성</button>
                                                        <span class="help-tip" data-tip="이번달 고정수입 내역을 transactions에 미확정(N)으로 생성합니다. 이미 생성된 건은 중복으로 추가되지 않습니다.">?</span>
                                                    </span>
                                                    <span class="btn-with-tip">
                                                        <button type="button" class="execute-btn compact-btn" id="fixed-income-auto-confirm-btn">이번달 확정</button>
                                                        <span class="help-tip" data-tip="이번달에 생성된 고정수입 미확정 내역(N)을 확정(Y)으로 바꿉니다. 확정되면 대시보드/달력 집계에 포함됩니다.">?</span>
                                                    </span>
                                                    <span class="btn-with-tip">
                                                        <button type="button" class="execute-btn outline compact-btn" id="fixed-income-auto-unconfirm-btn">확정 취소</button>
                                                        <span class="help-tip" data-tip="선택한 월의 고정수입 확정(Y)을 취소하여 미확정(N)으로 되돌립니다. 취소 후 고정수입 수정/삭제가 가능합니다.">?</span>
                                                    </span>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="table-wrap fixed-expense-table-wrap">
                                            <table class="fixed-expense-table" id="fixed-income-table">
                                                <thead>
                                                    <tr>
                                                        <th class="sortable" data-sort-key="title">항목</th>
                                                        <th class="sortable" data-sort-key="account">통장</th>
                                                        <th class="sortable" data-sort-key="category">카테고리</th>
                                                        <th class="sortable" data-sort-key="payday">입금일</th>
                                                        <th class="sortable" data-sort-key="amount">금액</th>
                                                        <th class="sortable memo-col" data-sort-key="memo">메모</th>
                                                        <th class="sortable" data-sort-key="status">상태</th>
                                                        <th>관리</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr class="empty-row">
                                                        <td colspan="8">등록된 고정 수입이 없습니다.</td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <div class="modal-overlay" id="fixed-income-auto-modal" style="display:none;">
        <div class="modal fixed-expense-modal">
            <div class="modal-header">
                <h3 id="fixed-income-auto-modal-title">고정수입 생성 내역</h3>
                <button type="button" class="modal-close" id="fixed-income-auto-modal-close">×</button>
            </div>
            <div class="modal-body">
                <div class="table-wrap fixed-expense-auto-table-wrap">
                    <table class="fixed-expense-table" id="fixed-income-auto-table">
                        <thead>
                            <tr>
                                <th>일자</th>
                                <th>내용</th>
                                <th>카테고리</th>
                                <th>금액</th>
                                <th>확정</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr class="empty-row">
                                <td colspan="5">선택한 월의 고정수입 생성 내역이 없습니다.</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <div id="toast" class="toast" style="display:none;" role="status" aria-live="polite"></div>

    <div class="modal-overlay" id="fixed-expense-auto-modal" style="display:none;">
        <div class="modal fixed-expense-modal">
            <div class="modal-header">
                <h3 id="fixed-expense-auto-modal-title">고정지출 생성 내역</h3>
                <button type="button" class="modal-close" id="fixed-expense-auto-modal-close">×</button>
            </div>
            <div class="modal-body">
                <div class="table-wrap fixed-expense-auto-table-wrap">
                    <table class="fixed-expense-table" id="fixed-expense-auto-table">
                        <thead>
                            <tr>
                                <th>일자</th>
                                <th>내용</th>
                                <th>카테고리</th>
                                <th>금액</th>
                                <th>확정</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr class="empty-row">
                                <td colspan="5">선택한 월의 고정지출 생성 내역이 없습니다.</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <div class="modal-overlay" id="fixed-expense-modal" style="display:none;">
        <div class="modal fixed-expense-modal">
            <div class="modal-header">
                <h3 id="fixed-expense-modal-title">고정 지출 등록</h3>
                <button type="button" class="modal-close" id="fixed-expense-modal-close">×</button>
            </div>
            <div class="modal-body">
                <div class="modal-field">
                    <label for="fixed-expense-title">항목명</label>
                    <input type="text" id="fixed-expense-title" placeholder="예: 월세, 보험료" />
                </div>
                <div class="modal-field">
                    <label>
                        <input type="checkbox" id="fixed-expense-is-subscription" />
                        구독(반복 결제)
                    </label>
                </div>
                <div class="modal-field">
                    <label for="fixed-expense-account">통장/카드</label>
                    <input type="text" id="fixed-expense-account" placeholder="예: 국민, 신한, 우리" />
                </div>
                <div class="modal-field">
                    <label for="fixed-expense-amount">금액</label>
                    <input type="number" id="fixed-expense-amount" placeholder="숫자만 입력" />
                </div>
                <div class="modal-field">
                    <label for="fixed-expense-category">카테고리</label>
                    <select id="fixed-expense-category">
                        <option value="">선택</option>
                        <option value="식비">식비</option>
                        <option value="편의점/마트">편의점/마트</option>
                        <option value="카페">카페</option>
                        <option value="배달">배달</option>
                        <option value="교통">교통</option>
                        <option value="주유">주유</option>
                        <option value="주거/관리">주거/관리</option>
                        <option value="공과금">공과금</option>
                        <option value="통신">통신</option>
                        <option value="보험">보험</option>
                        <option value="의료">의료</option>
                        <option value="교육">교육</option>
                        <option value="쇼핑">쇼핑</option>
                        <option value="문화/여가">문화/여가</option>
                        <option value="구독">구독</option>
                        <option value="수수료">수수료</option>
                        <option value="이체/송금">이체/송금</option>
                        <option value="환급/리워드">환급/리워드</option>
                        <option value="기타">기타</option>
                    </select>
                </div>
                <div class="modal-field">
                    <label for="fixed-expense-day">결제일</label>
                    <select id="fixed-expense-day">
                        <option value="">선택</option>
                        <option value="1">1일</option>
                        <option value="5">5일</option>
                        <option value="10">10일</option>
                        <option value="15">15일</option>
                        <option value="20">20일</option>
                        <option value="25">25일</option>
                        <option value="30">30일</option>
                    </select>
                </div>
                <div class="modal-field">
                    <label for="fixed-expense-memo">메모</label>
                    <textarea id="fixed-expense-memo" rows="3" placeholder="추가 설명을 입력하세요"></textarea>
                </div>
                <div class="fixed-expense-actions">
                    <button type="button" class="execute-btn" id="fixed-expense-add-btn">추가</button>
                    <button type="button" class="execute-btn outline" id="fixed-expense-reset-btn">초기화</button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal-overlay" id="fixed-income-modal" style="display:none;">
        <div class="modal fixed-expense-modal">
            <div class="modal-header">
                <h3 id="fixed-income-modal-title">고정 수입 등록</h3>
                <button type="button" class="modal-close" id="fixed-income-modal-close">×</button>
            </div>
            <div class="modal-body">
                <div class="modal-field">
                    <label for="fixed-income-title">항목명</label>
                    <input type="text" id="fixed-income-title" placeholder="예: 월급, 용돈" />
                </div>
                <div class="modal-field">
                    <label>
                        <input type="checkbox" id="fixed-income-is-extra" />
                        부가 수입
                    </label>
                </div>
                <div class="modal-field">
                    <label for="fixed-income-account">통장</label>
                    <input type="text" id="fixed-income-account" placeholder="예: 국민, 신한, 우리" />
                </div>
                <div class="modal-field">
                    <label for="fixed-income-amount">금액</label>
                    <input type="number" id="fixed-income-amount" placeholder="숫자만 입력" />
                </div>
                <div class="modal-field">
                    <label for="fixed-income-category">카테고리</label>
                    <select id="fixed-income-category">
                        <option value="">선택</option>
                        <option value="월급">월급</option>
                        <option value="용돈">용돈</option>
                        <option value="이자">이자</option>
                        <option value="배당">배당</option>
                        <option value="환급/리워드">환급/리워드</option>
                        <option value="부가수입">부가수입</option>
                        <option value="기타">기타</option>
                    </select>
                </div>
                <div class="modal-field">
                    <label for="fixed-income-day">입금일</label>
                    <select id="fixed-income-day">
                        <option value="">선택</option>
                        <option value="1">1일</option>
                        <option value="5">5일</option>
                        <option value="10">10일</option>
                        <option value="15">15일</option>
                        <option value="20">20일</option>
                        <option value="25">25일</option>
                        <option value="30">30일</option>
                    </select>
                </div>
                <div class="modal-field">
                    <label for="fixed-income-memo">메모</label>
                    <textarea id="fixed-income-memo" rows="3" placeholder="추가 설명을 입력하세요"></textarea>
                </div>
                <div class="fixed-expense-actions">
                    <button type="button" class="execute-btn" id="fixed-income-add-btn">추가</button>
                    <button type="button" class="execute-btn outline" id="fixed-income-reset-btn">초기화</button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal-overlay" id="dashboard-day-modal" style="display:none;">
        <div class="modal fixed-expense-modal">
            <div class="modal-header">
                <h3 id="dashboard-day-modal-title">거래 내역</h3>
                <button type="button" class="modal-close" id="dashboard-day-modal-close">×</button>
            </div>
            <div class="modal-body">
                <div class="table-wrap fixed-expense-auto-table-wrap">
                    <table class="preview-table" id="dashboard-day-table">
                        <colgroup>
                            <col style="width:90px;" />
                            <col style="width:110px;" />
                            <col style="width:110px;" />
                            <col style="width:260px;" />
                            <col style="width:120px;" />
                            <col style="width:120px;" />
                            <col style="width:140px;" />
                        </colgroup>
                        <thead>
                            <tr>
                                <th>은행/카드</th>
                                <th>내용</th>
                                <th>구분</th>
                                <th>거래내용</th>
                                <th>카테고리</th>
                                <th>금액</th>
                                <th>거래후 잔액</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr class="empty-row">
                                <td colspan="7">선택한 날짜의 거래 내역이 없습니다.</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <div class="modal-overlay" id="auth-modal" style="display:none;">
        <div class="modal">
            <div class="modal-header">
                <h3 id="auth-modal-title">로그인</h3>
                <button type="button" class="modal-close" id="auth-modal-close">×</button>
            </div>

            <div class="modal-tabs">
                <button type="button" class="modal-tab active" data-tab="login" id="auth-tab-login">로그인</button>
                <button type="button" class="modal-tab" data-tab="signup" id="auth-tab-signup">회원가입</button>
            </div>

            <div class="modal-body">
                <div class="modal-panel" id="auth-panel-login">
                    <div class="modal-field">
                        <label for="auth-login-username">이름</label>
                        <input id="auth-login-username" type="text" maxlength="50" autocomplete="username" />
                    </div>
                    <div class="modal-field">
                        <label for="auth-login-password">비밀번호</label>
                        <input id="auth-login-password" type="password" autocomplete="current-password" />
                    </div>
                    <button type="button" class="execute-btn" id="auth-login-btn">로그인</button>
                </div>

                <div class="modal-panel" id="auth-panel-signup" style="display:none;">
                    <div class="modal-field">
                        <label for="auth-signup-username">이름</label>
                        <input id="auth-signup-username" type="text" maxlength="50" autocomplete="username" />
                    </div>
                    <div class="modal-field">
                        <label for="auth-signup-password">비밀번호</label>
                        <input id="auth-signup-password" type="password" autocomplete="new-password" />
                    </div>
                    <button type="button" class="execute-btn" id="auth-signup-btn">회원가입</button>
                </div>
            </div>
        </div>
    </div>

    <script src="/script.js?v=20260123-10"></script>
</body>
</html>
